[{"/home/pheno/Documents/makesense/client/src/api/apiHandler.js":"1","/home/pheno/Documents/makesense/client/src/pages/Contacts/NeedWriteContacts.jsx":"2","/home/pheno/Documents/makesense/client/src/components/Forms/FormCall.jsx":"3","/home/pheno/Documents/makesense/client/src/App.jsx":"4","/home/pheno/Documents/makesense/client/src/components/Forms/FormVolunteer.jsx":"5","/home/pheno/Documents/makesense/client/src/components/Auth/UserProvider.jsx":"6","/home/pheno/Documents/makesense/client/src/components/Auth/withUser.jsx":"7","/home/pheno/Documents/makesense/client/src/components/Forms/FormSignin.jsx":"8","/home/pheno/Documents/makesense/client/src/components/Forms/FormContact.jsx":"9","/home/pheno/Documents/makesense/client/src/components/Forms/FormInstitution.jsx":"10","/home/pheno/Documents/makesense/client/src/pages/Users/Users.jsx":"11","/home/pheno/Documents/makesense/client/src/pages/Signin.jsx":"12","/home/pheno/Documents/makesense/client/src/pages/Contacts/OneContact.jsx":"13","/home/pheno/Documents/makesense/client/src/components/Forms/UploadVolunteer.jsx":"14","/home/pheno/Documents/makesense/client/src/pages/Contacts/NeedCallContacts.jsx":"15"},{"size":1508,"mtime":1606817910616,"results":"16","hashOfConfig":"17"},{"size":4974,"mtime":1606833459620,"results":"18","hashOfConfig":"17"},{"size":5494,"mtime":1606909674044,"results":"19","hashOfConfig":"17"},{"size":3203,"mtime":1607598653623,"results":"20","hashOfConfig":"17"},{"size":3768,"mtime":1607606243719,"results":"21","hashOfConfig":"17"},{"size":1304,"mtime":1605432291841,"results":"22","hashOfConfig":"17"},{"size":1067,"mtime":1604927652591,"results":"23","hashOfConfig":"17"},{"size":2290,"mtime":1606816688549,"results":"24","hashOfConfig":"17"},{"size":5752,"mtime":1606815730959,"results":"25","hashOfConfig":"17"},{"size":7793,"mtime":1606815819402,"results":"26","hashOfConfig":"17"},{"size":5879,"mtime":1607609549329,"results":"27","hashOfConfig":"17"},{"size":165,"mtime":1604927652591,"results":"28","hashOfConfig":"17"},{"size":16692,"mtime":1607609409727,"results":"29","hashOfConfig":"17"},{"size":5191,"mtime":1607608775731,"results":"30","hashOfConfig":"17"},{"size":6819,"mtime":1607609054158,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"139fx7f",{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/pheno/Documents/makesense/client/src/api/apiHandler.js",[],["65","66"],"/home/pheno/Documents/makesense/client/src/pages/Contacts/NeedWriteContacts.jsx",["67","68"],"import React, { Component } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\nimport SearchBar from \"../../components/Forms/SearchBar\";\n\nclass NeedWriteContacts extends Component {\n  state = {\n    contacts: [],\n    searchContacts: [],\n  };\n\n  componentDidMount() {\n    apiHandler\n      .getAll(\"/api/contacts\")\n      .then((apiRes) => {\n        this.getNeedWriteContacts(apiRes.data)\n        this.isCallNeeded();\n      })\n      .catch((apiErr) => {\n        console.log(apiErr);\n      });\n  }\n\n  isCallNeeded() {\n    for (const [index, item] of this.state.contacts.entries()) {\n      if (item.lastcall) {\n        let lastcall = new Date(item.lastcall);\n        let today = new Date();\n\n        let dateDiff = lastcall.getTime() - today.getTime();\n        let days = Math.ceil(dateDiff / (1000 * 3600 * 24));\n        // console.log(days);\n\n        if (item.frequency === \"Chaque jour\" && days === -1) {\n          apiHandler\n            .updateOne(\"/api/contacts/\" + item._id, {\n              needcall: true,\n            })\n            .then((apiRes) =>\n              apiHandler\n                .getAll(\"/api/contacts\")\n                .then((apiRes) => {\n                  this.getNeedWriteContacts(apiRes.data);\n                })\n                .catch((apiErr) => {\n                  console.log(apiErr);\n                })\n            )\n            .catch((apiErr) => console.log(apiErr));\n        } else if (item.frequency === \"2 fois par semaine\" && days === -3) {\n          apiHandler\n            .updateOne(\"/api/contacts/\" + item._id, {\n              needcall: true,\n            })\n            .then((apiRes) =>\n              apiHandler\n                .getAll(\"/api/contacts\")\n                .then((apiRes) => {\n                  this.getNeedWriteContacts(apiRes.data);\n                })\n                .catch((apiErr) => {\n                  console.log(apiErr);\n                })\n            )\n            .catch((apiErr) => console.log(apiErr));\n        } else if (item.frequency === \"1 fois par semaine\" && days === -7) {\n          apiHandler\n            .updateOne(\"/api/contacts/\" + item._id, {\n              needcall: true,\n            })\n            .then((apiRes) =>\n              apiHandler\n                .getAll(\"/api/contacts\")\n                .then((apiRes) => {\n                  this.getNeedWriteContacts(apiRes.data);\n                })\n                .catch((apiErr) => {\n                  console.log(apiErr);\n                })\n            )\n            .catch((apiErr) => console.log(apiErr));\n        }\n      }\n    }\n  }\n\n  getNeedWriteContacts(contacts) {\n    const needWriteContacts = contacts.filter(\n      (contact) => contact.type === \"eMail\" && contact.isActive === true\n    );\n    this.setState({\n      contacts: needWriteContacts,\n      searchContacts: needWriteContacts,\n    });\n  }\n\n  formatDate(date) {\n    const getDate = date.split(\"T\")[0].split(\"-\");\n    const formatedDate = `${getDate[2]}-${getDate[1]}-${getDate[0]}`;\n    // return `${date[2]}-${date[1]}-${date[0]}`;\n    return formatedDate;\n  }\n\n  search = (searchContact) => {\n    const copyContacts = [...this.state.contacts];\n\n    // return product.name.toLowerCase().includes(props.name.toLowerCase())\n\n    const filteredContacts = copyContacts.filter((contact) =>\n      contact.name.toLowerCase().includes(searchContact.search.toLowerCase())\n    );\n    this.setState({ searchContacts: filteredContacts });\n  };\n\n  render() {\n    if (!this.state.contacts) {\n      return <div>Loading</div>;\n    }\n\n    const randomOrder = this.state.searchContacts.sort(() => Math.random() - 0.5);\n\n    return (\n      <div className=\"contacts-needwrite\">\n        <h3 style={{ marginBottom: \"10px\", color: \"#e36164\" }}>\n          {this.state.searchContacts.length} contact\n          {this.state.searchContacts.length > 1 ? \"s\" : \"\"} attend\n          {this.state.searchContacts.length > 1 ? \"ent\" : \"\"} nos mails\n        </h3>\n        <SearchBar handleSearch={this.search} type=\"contact\"/>\n        <table>\n          <thead>\n            <tr>\n              <th scope=\"col\">Nom</th>\n              <th scope=\"col\">\n                Dernier\n                <br />\n                mail\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {randomOrder.map((contact) => (\n              <tr key={contact._id}>\n                <td scope=\"row\" data-label=\"Nom\">\n                  <Link to={`/contacts/${contact._id}/`}>{contact.name}</Link>\n                </td>\n                <td data-label=\"Dernier mail\">\n                  <Link to={`/contacts/${contact._id}/`}>\n                    {\" \"}\n                    {contact.lastcall\n                      ? this.formatDate(contact.lastcall)\n                      : \"Aucun appel\"}\n                  </Link>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default NeedWriteContacts;\n",["69","70"],"/home/pheno/Documents/makesense/client/src/components/Forms/FormCall.jsx",["71"],"/home/pheno/Documents/makesense/client/src/App.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Forms/FormVolunteer.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Auth/UserProvider.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Auth/withUser.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Forms/FormSignin.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Forms/FormContact.jsx",[],"/home/pheno/Documents/makesense/client/src/components/Forms/FormInstitution.jsx",[],"/home/pheno/Documents/makesense/client/src/pages/Users/Users.jsx",["72","73","74"],"/home/pheno/Documents/makesense/client/src/pages/Signin.jsx",[],"/home/pheno/Documents/makesense/client/src/pages/Contacts/OneContact.jsx",["75","76"],"/home/pheno/Documents/makesense/client/src/components/Forms/UploadVolunteer.jsx",["77","78"],"/home/pheno/Documents/makesense/client/src/pages/Contacts/NeedCallContacts.jsx",["79","80","81","82"],{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","severity":1,"message":"88","line":25,"column":17,"nodeType":"89","messageId":"90","endLine":25,"endColumn":22},{"ruleId":"91","severity":1,"message":"92","line":144,"column":21,"nodeType":"93","endLine":144,"endColumn":32},{"ruleId":"83","replacedBy":"94"},{"ruleId":"85","replacedBy":"95"},{"ruleId":"87","severity":1,"message":"96","line":6,"column":26,"nodeType":"89","messageId":"90","endLine":6,"endColumn":42},{"ruleId":"87","severity":1,"message":"88","line":64,"column":17,"nodeType":"89","messageId":"90","endLine":64,"endColumn":22},{"ruleId":"91","severity":1,"message":"92","line":109,"column":25,"nodeType":"93","endLine":109,"endColumn":36},{"ruleId":"91","severity":1,"message":"92","line":153,"column":25,"nodeType":"93","endLine":153,"endColumn":36},{"ruleId":"87","severity":1,"message":"88","line":61,"column":17,"nodeType":"89","messageId":"90","endLine":61,"endColumn":22},{"ruleId":"87","severity":1,"message":"88","line":231,"column":17,"nodeType":"89","messageId":"90","endLine":231,"endColumn":22},{"ruleId":"87","severity":1,"message":"88","line":27,"column":17,"nodeType":"89","messageId":"90","endLine":27,"endColumn":22},{"ruleId":"87","severity":1,"message":"88","line":62,"column":17,"nodeType":"89","messageId":"90","endLine":62,"endColumn":22},{"ruleId":"87","severity":1,"message":"88","line":25,"column":17,"nodeType":"89","messageId":"90","endLine":25,"endColumn":22},{"ruleId":"87","severity":1,"message":"97","line":29,"column":15,"nodeType":"89","messageId":"90","endLine":29,"endColumn":22},{"ruleId":"98","severity":1,"message":"99","line":131,"column":22,"nodeType":"100","messageId":"101","endLine":131,"endColumn":24},{"ruleId":"91","severity":1,"message":"92","line":186,"column":21,"nodeType":"93","endLine":186,"endColumn":32},"no-native-reassign",["102"],"no-negated-in-lhs",["103"],"no-unused-vars","'index' is assigned a value but never used.","Identifier","unusedVar","jsx-a11y/scope","The scope prop can only be used on <th> elements.","JSXAttribute",["102"],["103"],"'setDefaultLocale' is defined but never used.","'getHour' is assigned a value but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","no-global-assign","no-unsafe-negation"]